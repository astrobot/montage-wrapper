<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	  <head>
	    <title>Montage User Documentation</title>
	    
<link rel="stylesheet" type="text/css" media="screen,projection" href="/style.css" />

</head>

<body>
<div id="container">

<div id="montage-banner">
<img src="/images/MontageBanner.jpg" width="796" height="128" border="0" alt="" usemap="#MontageBanner_Map" />
<map name="MontageBanner_Map">
<area shape="rect" alt="" coords="713,77,767,127" href="http://ct.gsfc.nasa.gov" />
<area shape="rect" alt="" coords="687,21,789,69" href="http://irsa.ipac.caltech.edu" />
<area shape="rect" alt="" coords="0,0,123,128" href="http://montage.ipac.caltech.edu" />
</map>
<!-- End ImageReady Slices -->
</div>
<div id="nav">
    <ul>
    <li><a href="/">Home</a></li>
    <li><a href="http://hachi.ipac.caltech.edu:8080/montage">On-Request Mosaics</a></li>
    <li><a href="/docs/download.html">Download</a></li>
    <li><a href="/docs/">Documentation</a></li>
    <li><a href="/applications.html">Applications</a></li>
    <li><a href="/publications.html">Publications</a></li>
    <li><a href="http://irsa.ipac.caltech.edu/cgi-bin/Helpdesk/nph-genTicketForm?projname=Montage&projmail=montage@ipac.caltech.edu">Helpdesk</a></li>
  </ul>
</div>

<div id="content">

<div id="wrapper">
<h1>mProject</h1>

<div id="usage">

<dl class="description">
  <dt>Description:</dt>
  <dd><span class="file">mProject</span> reprojects a single image to the scale defined in a FITS header template file (read more about header templates <a href="headers.html">here</a>). The program produces a pair of images: the reprojected image and an "area" image consisting of the fraction input pixel sky area that went into each output pixel.  The "drizzle" algorithm is implemented.  The algorithm proceeds by mapping pixel corners (as adjusted by drizzle, if called) from the input pixel space to the output pixel space, calculating overlap area with each output pixel, and accumulating an appropriate fraction of the input flux into the output image pixels.  In addition, the appropriate fraction of the input pixel area is accumulated into the area image pixels.  Projection of points from input pixel space to output pixel space is calculated in two steps: first map from input pixel space to sky coordinates; second map from sky coordinates to output pixel space.</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mProject [-z <i>factor</i>] [-d <i>level</i>] [-s <i>statusfile</i>] [-h <i>hdu</i>] [-x <i>scale</i>] [-w <i>weightfile</i>] [-t <i>threshold</i>] [-X] [-f] <b>in.fits out.fits hdr.template</b></dd>
</dl>

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-z <i>factor</i></dt>
  <dd>Processing is done utilizing the <a href="algorithms.html#drizzle">drizzle algorithm</a>. <i>factor</i> is a floating point number; recommended drizzle factors are from 0.5 to 1. </dd>
  <dt>-d <i>level</i></dt>
  <dd>Causes additional debugging information to be printed to stdout.  Valid levels are 1-5 (for higher debugging levels, it is recommended to redirect the output to a file).</dd>
  <dt>-s <i>statusfile</i></dt>
  <dd>Output and errors are written to <i>statusfile</i> instead of being written to stdout. </dd>
  <dt>-h <i>hdu</i></dt>
  <dd>Use the specified FITS extension (default is to use the first HDU with image data)</dd>
  <dt>-x <i>scale</i></dt>
  <dd>Apply a correction factor of <i>scale</i> to each pixel</dd>
  <dt>-w <i>weightfile</i></dt>
  <dd>Path to a weight map to be used when reading values from the input image.</dd>
  <dt>-t <i>threshold</i></dt>
  <dd>Pixels with weights below <i>threshold</i> will be treated as blank.</dd>
  <dt>-X</dt>
  <dd>Makes the output region (originally defined in the header template) big enough to include all of the input images</dd>
</dl>

<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>in.fits</dt>
  <dd>Input FITS file to be reprojected.</dd>
  <dt>out.fits</dt>
  <dd>Path of output FITS file to be created.</dd>
  <dt>hdr.template</dt>
  <dd>FITS <a href="headers.html">header template</a> to be used in generation of output image</dd>
</dl>

<dl class="description">
  <dt>Results:</dt>
  <dd>Two files are created as output: the reprojected FITS file (<i>out.fits</i>), and an "area" image (<i>out_area.fits</i>) which records the amount of coverage (in output pixel space) provided by the input images.</dd>
</dl>

<p class="dochead">Examples:</p>

<dl class="example">
  <dt>$ mProject rawdir/real_orig.fits projdir/base_unity.fits templates/galactic_orig.txt</dt>
  <dd>[struct stat="OK", time=143]</dd>
</dl>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat="<i>OK</i>", time=<i>seconds</i>]</li>   
  <li>[struct stat="ERROR", msg="Usage: mProject [-z factor][-d level][-i ypix,xpix][-o ypix,xpix] in.fits out.fits hdr.template"]</li>   
  <li>[struct stat="ERROR", msg="Drizzle factor string (<i>string</i>) cannot be interpreted as a real number"]</li>   
  <li>[struct stat="ERROR", msg="Weight threshold string (<i>string</i>) cannot be interpreted as a real number"]</li>   
  <li>[struct stat="ERROR", msg="Flux scale string (<i>string</i>) cannot be interpreted as a real number"]</li>   
  <li>[struct stat="ERROR", msg="Cannot open status file: <i>statusfile</i>"] </li>   
  <li>[struct stat="ERROR", msg="HDU value (<i>hdu</i>) must be a non-negative integer"] </li>   
  <li>[struct stat="ERROR", msg="No overlap"] <span class="explanation">(indicates that none of the output pixels are contained in the area defined by the header template)</span></li>   
  <li>[struct stat="ERROR", msg="Not enough memory for output data image array"]</li>   
  <li>[struct stat="ERROR", msg="Not enough memory for output area image array"]</li>   
  <li>[struct stat="ERROR", msg="Output wcsinit() failed."]</li>   
  <li>[struct stat="ERROR", msg="Input wcsinit() failed."]</li>   
  <li>[struct stat="ERROR", status=<i>n</i>, msg="FITS library error"]</li>   
  <li>[struct stat="ERROR", msg="All pixels are blank"]</li>   
  <li>[struct stat="ERROR", msg="Template file not found"]</li>   
  <li>[struct stat="ERROR", msg="Image file <i>in.fits</i> missing or invalid FITS"]</li>   
  <li>[struct stat="ERROR", msg="Weight file <i>weightfile</i> missing or invalid FITS"]</li>   
</ul>
</div>
</div>

</div> <!-- end #content -->

<div id="footer">

<p class="foot-just"><i>If your research uses Montage, please include the following acknowledgement: </i>"This research made use of Montage, funded by the National Aeronautics and Space Administration's Earth Science Technology Office, Computation Technologies Project, under Cooperative Agreement Number NCC5-626 between NASA and the California Institute of Technology.  Montage is maintained by the NASA/IPAC Infrared Science Archive."</p>
<p class="foot-unjust">The Montage distribution includes an adaptation of the MOPEX algorithm developed at the Spitzer Science Center.</p>
<!-- ImageReady Slices (logobar.psd) -->
<div align="center">
<img src="/images/logobar.jpg" border="0" alt="" usemap="#logobar_Map" />
<map name="logobar_Map">
<area shape="poly" alt="" coords="185,46, 203,21, 255,3, 345,2, 409,35, 410,56, 403,71, 354,98, 301,103, 221,91, 187,64" href="/" />
<area shape="rect" alt="" coords="379,96,475,161" href="http://www.cct.lsu.edu" />
<area shape="rect" alt="" coords="95,14,179,91" href="http://www.caltech.edu" />
<area shape="rect" alt="" coords="424,13,499,82" href="http://www.nasa.gov" />
<area shape="rect" alt="" coords="1,33,90,66" href="http://jpl.nasa.gov" />
<area shape="rect" alt="" coords="150,106,234,148" href="http://www.ipac.caltech.edu" />
<area shape="rect" alt="" coords="265,106,337,181" href="http://www.cacr.caltech.edu" />
<area shape="rect" alt="" coords="512,31,611,79" href="http://us-vo.org" />
</map>
</div>
<!-- End ImageReady Slices -->
</div>
</div> <!-- end #container-->
</body>
</html>

